# 手動テスト

## 結合テスト

### 1. 認証フロー

前提条件: ログアウトし、アプリをアンインストールしてから、再インストールする。

- ログイン
  - 利用規約とプライバシーポリシー
    - 「利用規約」をタップすると、利用規約が閲覧できること。
      - [x] iOS
      - [ ] Android
    - 「プライバシーポリシー」をタップすると、プライバシーポリシーが閲覧できること。
      - [x] iOS
      - [ ] Android
  - Google アカウントでログイン
    - 「Google で続ける」ボタンをタップし画面の案内に従い操作を続けると、ログインが完了してホーム画面に遷移すること。
      - [x] iOS
      - [ ] Android
    - Google アカウントのログイン中にキャンセルすると、エラーメッセージなくログイン画面に留まり、操作が継続できること。
      - [x] iOS
      - [ ] Android
  - (iOS のみ)Apple アカウントでログイン
    - 「Apple で続ける」ボタンをタップし画面の案内に従い操作を続けると、ログインが完了してホーム画面に遷移すること。
      - [x] iOS
    - Apple アカウントで求められるのは「名前」のみであること。メールアドレスは求めないことに注意する。
      - [x] iOS
    - Apple アカウントのログイン中にキャンセルすると、エラーメッセージなくログイン画面に留まり、操作が継続できること。
      - [x] iOS
    - Apple アカウントのログインに通信エラーなどで失敗した場合、失敗した旨のメッセージが表示され、ログイン画面に留まること。
      - [x] iOS
  - 匿名ログイン
    - 「アカウントを利用せず続ける」ボタンをタップすると、ホーム画面に遷移すること。
      - [x] iOS
      - [ ] Android
    - 匿名認証に失敗した場合、失敗した旨のメッセージが表示され、ログイン画面に留まること。
      - [ ] iOS
        - NG: メッセージが表示されない。
      - [ ] Android
- アカウント連携
  - 匿名ユーザーが設定画面から Google アカウントと連携でき、アイコンと表示名が更新される。
    - [x] iOS
    - [ ] Android
  - (iOS のみ)名ユーザーが設定画面から Apple アカウントと連携でき、アイコンと表示名が更新される。
    - [x] iOS
  - アカウント作成済みの Google アカウントで連携しようとした場合、その旨のエラーメッセージが表示される。
    - [x] iOS
    - [ ] Android
  - (iOS のみ)アカウント作成済みの Apple アカウントで連携しようとした場合、その旨のエラーメッセージが表示される。
    - [x] iOS
- ログアウト・アカウント削除
  - Google アカウントでログイン中、設定画面からログアウトすると、ログイン画面に遷移する。
    - [x] iOS
    - [ ] Android
  - Apple アカウントでログイン中、設定画面からログアウトすると、ログイン画面に遷移する。
    - [x] iOS
    - [ ] Android
  - Google アカウントでログイン中、設定画面からアカウントを削除すると、ログイン画面に遷移する。
    - [x] iOS
    - [ ] Android
  - Apple アカウントでログイン中、設定画面からアカウントを削除すると、ログイン画面に遷移する。
    - [x] iOS
    - [ ] Android
  - 匿名 アカウントでログイン中、設定画面からアカウントを削除すると、ログイン画面に遷移する。
    - [x] iOS
    - [ ] Android

### 2. ホーム画面

- 家事一覧タブ
  - 家事が 1 件も登録されていない場合、その旨のメッセージが表示されている。
    - [x] iOS
    - [ ] Android
  - 家事が複数件登録されている場合、登録済みの家事が作成した順で表示される。
    - [x] iOS
    - [ ] Android
- ログ一覧タブ
  - ログがない場合、その旨のメッセージが表示されている。
    - [x] iOS
    - [ ] Android
  - 完了した家事ログが、完了日時の降順で一覧表示される。
    - [ ] iOS
    - [ ] Android

### 3. 家事

### 3-1. 家事追加・編集

- 家事追加
  - 右下の追加ボタンから家事追加画面に遷移できる。
    - [x] iOS
    - [ ] Android
  - 家事が 0 件の場合、家事を登録するボタンから家事追加画面に遷移できる。
    - [x] iOS
    - [ ] Android
  - 家事の名前とアイコンを入力して、新しい家事を登録できる。
    - [x] iOS
    - [ ] Android
- Pro 版制限
  - フリー版ユーザーが家事を 10 件登録済みの状態で、11 件目を登録しようとすると、Pro 版へのアップグレードを促すダイアログが表示され、登録ができない。
    - [x] iOS
    - [ ] Android
  - Pro 版ユーザーは、11 件以上の家事を登録できる。
    - [x] iOS
    - [ ] Android

### 3-2. 家事ログ追加

- 家事アイテムをタップすると、現在時刻で家事ログが記録される。
  - [x] iOS
  - [ ] Android
- クイック登録バーから家事をタップすると、現在時刻で完了ログが記録される。
  - [x] iOS
  - [ ] Android
- 家事ログの右側のコピーボタンをタップすると、現在時刻で家事ログが記録される。
  - [x] iOS
  - [ ] Android

### 3-3. 家事ログ削除

- 家事ログをスワイプすると、家事ログが削除される。
  - [x] iOS
  - [ ] Android
- 家事ログを削除した後に元に戻すをタップすると、削除した家事ログが復元される。
  - [x] iOS
  - [ ] Android

### 3-4. 家事削除

- 家事をロングタップして削除を実行すると、家事が削除され、家事ログも削除される。
  - [x] iOS
  - [ ] Android

### 4. 分析画面

- 回数が正しく表示される。
  - [x] iOS
  - [ ] Android
- 曜日ごとの回数が正しく表示される。
  - [x] iOS
  - [ ] Android
- 時間帯ごとの回数が正しく表示される。
  - [x] iOS
  - [ ] Android
- 家事ログを追加して分析画面を開き直すと、即時に最新のデータが反映される。
  - [x] iOS
  - [ ] Android
- 曜日グラフでグラフをタップすると、項目の凡例と値がツールチップ上に表示される。
  - [x] iOS
  - [ ] Android
- 曜日グラフで凡例をタップすると、該当項目の表示/非表示が切り替わり、グラフが更新される。
  - [x] iOS
  - [ ] Android
- 曜日グラフで凡例をロングタップすると、該当項目のみが表示され、グラフが更新される。
  - [x] iOS
  - [ ] Android
- 時間帯グラフでグラフをタップすると、項目の凡例と値がツールチップ上に表示される。
  - [x] iOS
    - NG: ツールチップが表示されない。
  - [ ] Android
- 時間帯グラフで凡例をタップすると、該当項目の表示/非表示が切り替わり、グラフが更新される。
  - [x] iOS
  - [ ] Android
- 時間帯グラフで凡例をロングタップすると、該当項目のみが表示され、グラフが更新される。
  - [x] iOS
  - [ ] Android

### 5. 設定・課金

- 設定画面
  - Google アカウントでログインしている場合、Google アカウントのアイコンと表示名が表示される。
    - [x] iOS
    - [ ] Android
  - (iOS のみ)Apple アカウントでログインしている場合、Apple アイコンと表示名が表示される。
    - [ ] iOS
      - NG: 名前が表示されない
  - 匿名ユーザーの場合、プロフィールアイコンと「ゲストユーザー」と表示される。
    - [x] iOS
    - [ ] Android
  - フリー版ユーザーの場合、フリー版である旨が表示され、Pro 版にアップグレードするためのボタンが表示される。
    - [x] iOS
    - [ ] Android
  - 「Pro 版にアップグレード」ボタンをタップすると、アップグレード画面に遷移する。
    - [x] iOS
    - [ ] Android
  - Pro 版ユーザーの場合、Pro 版である旨が表示され、Pro 版にアップグレードするためのボタンは表示されない。
    - [x] iOS
    - [ ] Android
- Pro 版アップグレード画面

  - 商品情報が表示される。
    - [x] iOS
    - [ ] Android
  - 購入すると、設定画面に戻りプラン情報が Pro に更新される。
    - [x] iOS
    - [ ] Android
  - 購入履歴を復元すると、設定画面に戻りプラン情報が Pro に更新される。
    - [x] iOS
    - [ ] Android

- **デバッグ**
  - [ ] 本番リリースビルドでは、デバッグ機能が表示されない

## シナリオテスト

### シナリオ 1：新規ユーザー登録から基本操作

1. アプリを初回起動し、ログイン画面が表示されることを確認する。
2. 「Google で続ける」をタップし、新規アカウントでサインアップする。
3. ホーム画面が表示され、家事一覧が空の状態であることを確認する。
4. FAB をタップし、家事追加画面で新しい家事（例：「部屋の掃除」）を登録する。
5. ホーム画面の家事一覧に「部屋の掃除」が表示されていることを確認する。
6. 「部屋の掃除」アイテムの左側をタップして完了ログを記録する。
7. 完了アニメーションとスナックバーが表示され、「ログ」タブがハイライトされることを確認する。
8. 「ログ」タブに切り替え、完了ログが記録されていることを確認する。
9. 設定画面に遷移し、自分の Google アカウント情報と「現在のプラン: フリー版」が表示されていることを確認する。
10. ログアウトし、ログイン画面に戻ることを確認する。

### シナリオ 2：フリー版から Pro 版へのアップグレード

1. フリー版ユーザーでログインする。
2. 家事を 10 件登録する。
3. 11 件目の家事を登録しようとし、アップグレードを促すダイアログが表示されることを確認する。
4. ダイアログの「Pro 版にアップグレード」ボタンをタップし、アップグレード画面へ遷移することを確認する。
5. （または設定画面から）アップグレード画面へ遷移し、購入ボタンをタップする。
6. 購入処理を（モックで）成功させる。
7. 設定画面に戻り、「現在のプラン: Pro 版」に表示が更新されていることを確認する。
8. 再度、家事追加画面を開き、11 件目の家事が登録できることを確認する。

### シナリオ 3：匿名ユーザーのアカウント連携

1. 「アカウントを利用せず続ける」で匿名ユーザーとしてログインする。
2. 家事をいくつか登録・完了する。
3. 設定画面に遷移し、「ゲストユーザー」と表示されていること、アカウント連携の案内があることを確認する。
4. 「Apple ID と連携」をタップし、アカウント連携を完了させる。
5. 設定画面のユーザー情報が Apple アカウントのものに更新されていることを確認する。
6. アプリを再起動し、Apple アカウントで自動ログインされ、登録した家事データが保持されていることを確認する。
